{"ast":null,"code":"import React,{useState,useEffect}from'react';import{MapContainer,TileLayer,Marker,Popup,useMap,ZoomControl,Polyline}from'react-leaflet';import L from'leaflet';import'leaflet/dist/leaflet.css';// Fix for default markers\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:require('leaflet/dist/images/marker-icon-2x.png'),iconUrl:require('leaflet/dist/images/marker-icon.png'),shadowUrl:require('leaflet/dist/images/marker-shadow.png')});// Custom icons\nconst createIcon=color=>new L.Icon({iconUrl:`data:image/svg+xml,${encodeURIComponent(`\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"${color}\" width=\"36px\" height=\"36px\">\n      <path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/>\n    </svg>\n  `)}`,iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});const icons={current:createIcon('#4CAF50'),start:createIcon('#2196F3'),end:createIcon('#F44336'),selected:createIcon('#FF9800')};function LocationMarker(){const[position,setPosition]=useState(null);const map=useMap();useEffect(()=>{map.locate().on(\"locationfound\",function(e){setPosition(e.latlng);map.flyTo(e.latlng,map.getZoom());});},[map]);return position===null?null:/*#__PURE__*/_jsx(Marker,{position:position,icon:icons.current,children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"current-location-popup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ihr Standort\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lat: \",position.lat.toFixed(4)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lng: \",position.lng.toFixed(4)]})]})})});}function MapControls(){const map=useMap();useEffect(()=>{map.zoomControl.setPosition('topright');// Add scale control\nL.control.scale({metric:true,imperial:false,position:'bottomright'}).addTo(map);},[map]);return null;}const Map=_ref=>{let{onLocationSelect,startPoint,endPoint}=_ref;const[selectedLocation,setSelectedLocation]=useState(null);const handleMapClick=e=>{const{lat,lng}=e.latlng;setSelectedLocation({lat,lng});if(onLocationSelect){onLocationSelect({lat,lng});}};// Calculate route path (dummy data for now)\nconst routePath=startPoint&&endPoint?[[startPoint.lat,startPoint.lng],[endPoint.lat,endPoint.lng]]:null;return/*#__PURE__*/_jsxs(MapContainer,{center:[48.1351,11.5820]// München\n,zoom:13,style:{height:\"100%\",width:\"100%\"},zoomControl:false,onClick:handleMapClick,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),/*#__PURE__*/_jsx(ZoomControl,{position:\"topright\"}),/*#__PURE__*/_jsx(LocationMarker,{}),/*#__PURE__*/_jsx(MapControls,{}),selectedLocation&&/*#__PURE__*/_jsx(Marker,{position:[selectedLocation.lat,selectedLocation.lng],icon:icons.selected,children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"selected-location-popup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ausgew\\xE4hlter Standort\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lat: \",selectedLocation.lat.toFixed(4)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lng: \",selectedLocation.lng.toFixed(4)]})]})})}),startPoint&&/*#__PURE__*/_jsx(Marker,{position:[startPoint.lat,startPoint.lng],icon:icons.start,children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"selected-location-popup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Startpunkt\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lat: \",startPoint.lat.toFixed(4)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lng: \",startPoint.lng.toFixed(4)]})]})})}),endPoint&&/*#__PURE__*/_jsx(Marker,{position:[endPoint.lat,endPoint.lng],icon:icons.end,children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"selected-location-popup\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Zielpunkt\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lat: \",endPoint.lat.toFixed(4)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lng: \",endPoint.lng.toFixed(4)]})]})})}),routePath&&/*#__PURE__*/_jsx(Polyline,{positions:routePath,color:\"#2196F3\",weight:4,opacity:0.7,dashArray:\"10, 10\"})]});};export default Map;","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","useMap","ZoomControl","Polyline","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","createIcon","color","encodeURIComponent","iconSize","iconAnchor","popupAnchor","icons","current","start","end","selected","LocationMarker","position","setPosition","map","locate","on","e","latlng","flyTo","getZoom","icon","children","className","lat","toFixed","lng","MapControls","zoomControl","control","scale","metric","imperial","addTo","Map","_ref","onLocationSelect","startPoint","endPoint","selectedLocation","setSelectedLocation","handleMapClick","routePath","center","zoom","style","height","width","onClick","url","attribution","positions","weight","opacity","dashArray"],"sources":["/Users/praveentharmalingam/CascadeProjects/wpr2/src/components/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap, ZoomControl, Polyline } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\n// Custom icons\nconst createIcon = (color) => new L.Icon({\n  iconUrl: `data:image/svg+xml,${encodeURIComponent(`\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"${color}\" width=\"36px\" height=\"36px\">\n      <path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/>\n    </svg>\n  `)}`,\n  iconSize: [36, 36],\n  iconAnchor: [18, 36],\n  popupAnchor: [0, -36],\n});\n\nconst icons = {\n  current: createIcon('#4CAF50'),\n  start: createIcon('#2196F3'),\n  end: createIcon('#F44336'),\n  selected: createIcon('#FF9800')\n};\n\nfunction LocationMarker() {\n  const [position, setPosition] = useState(null);\n  const map = useMap();\n\n  useEffect(() => {\n    map.locate().on(\"locationfound\", function (e) {\n      setPosition(e.latlng);\n      map.flyTo(e.latlng, map.getZoom());\n    });\n  }, [map]);\n\n  return position === null ? null : (\n    <Marker position={position} icon={icons.current}>\n      <Popup>\n        <div className=\"current-location-popup\">\n          <h3>Ihr Standort</h3>\n          <p>Lat: {position.lat.toFixed(4)}</p>\n          <p>Lng: {position.lng.toFixed(4)}</p>\n        </div>\n      </Popup>\n    </Marker>\n  );\n}\n\nfunction MapControls() {\n  const map = useMap();\n  \n  useEffect(() => {\n    map.zoomControl.setPosition('topright');\n    \n    // Add scale control\n    L.control.scale({\n      metric: true,\n      imperial: false,\n      position: 'bottomright'\n    }).addTo(map);\n  }, [map]);\n\n  return null;\n}\n\nconst Map = ({ onLocationSelect, startPoint, endPoint }) => {\n  const [selectedLocation, setSelectedLocation] = useState(null);\n\n  const handleMapClick = (e) => {\n    const { lat, lng } = e.latlng;\n    setSelectedLocation({ lat, lng });\n    if (onLocationSelect) {\n      onLocationSelect({ lat, lng });\n    }\n  };\n\n  // Calculate route path (dummy data for now)\n  const routePath = startPoint && endPoint ? [\n    [startPoint.lat, startPoint.lng],\n    [endPoint.lat, endPoint.lng]\n  ] : null;\n\n  return (\n    <MapContainer\n      center={[48.1351, 11.5820]} // München\n      zoom={13}\n      style={{ height: \"100%\", width: \"100%\" }}\n      zoomControl={false}\n      onClick={handleMapClick}\n    >\n      <TileLayer\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      />\n      <ZoomControl position=\"topright\" />\n      <LocationMarker />\n      <MapControls />\n      \n      {selectedLocation && (\n        <Marker position={[selectedLocation.lat, selectedLocation.lng]} icon={icons.selected}>\n          <Popup>\n            <div className=\"selected-location-popup\">\n              <h3>Ausgewählter Standort</h3>\n              <p>Lat: {selectedLocation.lat.toFixed(4)}</p>\n              <p>Lng: {selectedLocation.lng.toFixed(4)}</p>\n            </div>\n          </Popup>\n        </Marker>\n      )}\n\n      {startPoint && (\n        <Marker position={[startPoint.lat, startPoint.lng]} icon={icons.start}>\n          <Popup>\n            <div className=\"selected-location-popup\">\n              <h3>Startpunkt</h3>\n              <p>Lat: {startPoint.lat.toFixed(4)}</p>\n              <p>Lng: {startPoint.lng.toFixed(4)}</p>\n            </div>\n          </Popup>\n        </Marker>\n      )}\n\n      {endPoint && (\n        <Marker position={[endPoint.lat, endPoint.lng]} icon={icons.end}>\n          <Popup>\n            <div className=\"selected-location-popup\">\n              <h3>Zielpunkt</h3>\n              <p>Lat: {endPoint.lat.toFixed(4)}</p>\n              <p>Lng: {endPoint.lng.toFixed(4)}</p>\n            </div>\n          </Popup>\n        </Marker>\n      )}\n\n      {routePath && (\n        <Polyline \n          positions={routePath}\n          color=\"#2196F3\"\n          weight={4}\n          opacity={0.7}\n          dashArray=\"10, 10\"\n        />\n      )}\n    </MapContainer>\n  );\n};\n\nexport default Map;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}